(this.webpackJsonpezbeq=this.webpackJsonpezbeq||[]).push([[0],{352:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n.n(c),s=n(16),i=n.n(s),o=(n(213),n(15)),l=n(5),u=n(27),d=n(79),j=n(187),b=n(415),f=n(13),p=n.n(f),O=n(19),h=n(75),m="/api",v=new function e(){var t=this;Object(h.a)(this,e),this.getAuthors=function(){return t.doGet("authors")},this.getLanguages=function(){return t.doGet("languages")},this.getYears=function(){return t.doGet("years")},this.getAudioTypes=function(){return t.doGet("audiotypes")},this.getContentTypes=function(){return t.doGet("contenttypes")},this.getMeta=function(){return t.doGet("meta")},this.getVersion=function(){return t.doGet("version")},this.doGet=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,a,c=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:1,e.next=3,fetch("".concat(m,"/").concat(n,"/").concat(t),{method:"GET"});case 3:if((a=e.sent).ok){e.next=6;break}throw new Error("EzBeq.get".concat(t," failed, HTTP status ").concat(a.status));case 6:return e.abrupt("return",a.json());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.appendTo=function(e,t,n){if(n&&n.length>0){var a=n.map((function(e){return"".concat(t,"=").concat(e)})).join("&");return"".concat(e).concat(-1===e.indexOf("?")?"?":"&").concat(a)}return e},this.search=Object(O.a)(p.a.mark((function e(){var n,a,c,r,s,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:null,a=i.length>1&&void 0!==i[1]?i[1]:null,c=i.length>2&&void 0!==i[2]?i[2]:null,r=t.appendTo(t.appendTo(t.appendTo("".concat(m,"/1/search"),"authors",n),"years",a),"audioTypes",c),e.next=6,fetch(r,{method:"GET"});case 6:if((s=e.sent).ok){e.next=9;break}throw new Error("EzBeq.search failed, HTTP status ".concat(s.status));case 9:return e.abrupt("return",s.json());case 10:case"end":return e.stop()}}),e)}))),this.load=Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.search());case 1:case"end":return e.stop()}}),e)}))),this.sendFilter=function(){var e=Object(O.a)(p.a.mark((function e(n,a,c){var r,s,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=i.length>3&&void 0!==i[3]?i[3]:null)){e.next=7;break}return e.next=4,t.doPatch(n,t.createPatchPayload(c,r,a));case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,fetch("".concat(m,"/1/devices/").concat(n,"/filter/").concat(c),{method:"PUT",body:JSON.stringify({entryId:a}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 9:if((s=e.sent).ok){e.next=12;break}throw new Error("EzBeq.sendFilter failed, HTTP status ".concat(s.status));case 12:return e.abrupt("return",s.json());case 13:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),this.sendTextCommands=function(){var e=Object(O.a)(p.a.mark((function e(t,n,a,c,r,s,i){var o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/1/devices/").concat(t,"/commands"),{method:"PUT",body:JSON.stringify({overwrite:i,slot:"".concat(n),inputs:a,outputs:c,commandType:r,commands:s}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:if((o=e.sent).ok){e.next=5;break}throw new Error("EzBeq.sendTextCommands failed, HTTP status ".concat(o.status));case 5:return e.abrupt("return",o.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,c,r,s,i){return e.apply(this,arguments)}}(),this.clearSlot=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/1/devices/").concat(t,"/filter/").concat(n),{method:"DELETE"});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("EzBeq.clearSlot failed, HTTP status ".concat(a.status));case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.activateSlot=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/1/devices/").concat(t,"/config/").concat(n,"/active"),{method:"PUT"});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("EzBeq.activateSlot failed, HTTP status ".concat(a.status));case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.setGains=function(){var e=Object(O.a)(p.a.mark((function e(n,a,c){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.doPatch(n,t.createPatchPayload(a,c));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),this.doPatch=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/2/devices/").concat(t),{method:"PATCH",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("EzBeq.activateSlot failed, HTTP status ".concat(a.status));case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.createPatchPayload=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={};t.hasOwnProperty("master_mv")&&(a.masterVolume=parseFloat(t.master_mv)),t.hasOwnProperty("master_mute")&&(a.mute=t.master_mute);var c={id:String(e),gains:t.gains.map((function(e){return parseFloat(e)})),mutes:t.mutes};return a.slots=n?[Object.assign({},c,{entry:n})]:[c],a},this.loadWithMV=function(){var e=Object(O.a)(p.a.mark((function e(n,a,c,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sendFilter(n,a,c,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),this.getDevices=Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.doGet("devices",2));case 1:case"end":return e.stop()}}),e)}))),this.getLevels=function(){var e=Object(O.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.doGet("devices/".concat(n,"/levels")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=n(414),x=n(416),w=function(){var e=Object(O.a)(p.a.mark((function e(t,n,a){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:c=e.sent,t(c),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a){return e.apply(this,arguments)}}(),y=function(e,t){var n=Object(c.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n).value:t}catch(a){return console.log(a),t}})),a=Object(l.a)(n,2),r=a[0],s=a[1];return[r,function(t){try{var n=t instanceof Function?t(r):t;s(n),window.localStorage.setItem(e,JSON.stringify({value:n}))}catch(a){console.log(a)}}]},S=n(404),A=n(191),C=Object(d.a)((function(e){return{noLeft:{marginLeft:"0px"}}})),E=function(){var e=C(),t=Object(c.useState)({}),n=Object(l.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)({}),o=Object(l.a)(i,2),u=o[0],d=o[1],j=function(e){return e.toString().padStart(2,"0")};if(Object(c.useEffect)((function(){w(s,v.getMeta)}),[]),Object(c.useEffect)((function(){w(d,v.getVersion)}),[]),r||u){var b=r&&r.version?r.version.substring(0,7):"";return Object(a.jsxs)(S.a,{container:!0,justify:"space-around",className:e.noLeft,children:[Object(a.jsx)(S.a,{item:!0,children:Object(a.jsx)(A.a,{variant:"caption",color:"textSecondary",children:r?"".concat(function(e){if(e){var t=new Date(0);return t.setUTCSeconds(e),"".concat(t.getFullYear()).concat(j(t.getMonth()+1)).concat(j(t.getDate()),"_").concat(j(t.getHours())).concat(j(t.getMinutes())).concat(j(t.getSeconds()))}return"?"}(r.loaded)," / ").concat(b):""})}),Object(a.jsx)(S.a,{item:!0,children:Object(a.jsx)(A.a,{variant:"caption",color:"textSecondary",children:"UNKNOWN"!==u.version?"v".concat(u.version):u.version})})]})}return null},k=n(417),N=n(418),T=n(184),I=n.n(T),D=n(185),P=n.n(D),L=n(186),R=n.n(L),V=n(421),F=n(54),G=n(173),M=n.n(G),z=function(e){var t=e.err,n=e.setErr,r=Object(c.useState)(null),s=Object(l.a)(r,2),i=s[0],o=s[1];Object(c.useEffect)((function(){t?(console.error(t),o(t.message)):o(null)}),[t,o]);var u=function(e,t){n(null)};return Object(a.jsx)(V.a,{open:null!==i,autoHideDuration:1e4,onClose:u,message:t?t.message:null,action:Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(F.a,{size:"small","aria-label":"close",color:"inherit",onClick:u,children:Object(a.jsx)(M.a,{fontSize:"small"})})})})},B=n(405),U=n(406),Q=n(422),q=n(80),W=n(123),K=n(55),Y=Object(d.a)((function(e){return{noLeftTop:{marginLeft:"0px",marginTop:"0px"},title:{flexGrow:1,marginLeft:e.spacing(1)},device:Object(u.a)({flexGrow:1,margin:e.spacing(1)},e.breakpoints.down("sm"),{flexGrow:.5}),white:{color:e.palette.common.white},smallAvatar:{width:e.spacing(3),height:e.spacing(3)}}})),J=function(e){var t=e.availableDeviceNames,n=e.setSelectedDeviceName,c=e.selectedDeviceName,r=e.children,s=Y();return Object(a.jsx)(B.a,{position:"static",className:s.noLeftTop,children:Object(a.jsxs)(U.a,{children:[Object(a.jsx)(Q.a,{alt:"beqcatalogue",variant:"rounded",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAHmUExURRUoRhsuTgQUKAIGEwcTJwkUKDhCUgAAABUnRRcqSxMnRAoVKhcoRRYpSQUNHBEeNCIRIgcSJBIkRBwoPRQoRwsVJwEGKRgrTBIfPa8ABf+gLFw5JhUiOK7XAP+lKwwaMQIDBsUDAxEkRgoiSPudLE5pEz6uyM8DAwYKGmeCCwUIDRAiQRgkORxjihcpRwwlQwMQIDosXf+rLJZq2QsfODUQHx0uQd4CAAsaJxxWa0C0ztICAj9UGbQABEO61LjjACAlLiYsNxYmISUzVlULGEZiFbsCBAEWKgsZLLXfAC0pTAEOKAoqSlU6KL3pAC80P8w0c8h3Lh0SJBpJYE01KE45Kb1yLl5GKWd9A22HBi5BGz9PaotaKj1LY0dUax8yUSUwQyAoScgCAmomT8IzcLstZNg3eVtDjY1lzSdifxQTJXVMpjqivBdAVJ8GCseAMsuDMismKcEDBGILFyp1jC4RIXORC9kDAowDDJi8AjYrKOQDAYEIER1okNOFLKDIAt6QKxceKZZmKrlvLjFBXzBBX1ENGqgxaSQeNUIfN4soVyVeeoFev5gtYLAsYmRMmVkaMDo5Qp5x4wYRKjwgOWVQPgwrPG5JnlhHP1I8MxxWgFduG7huLhE2U5ZiOjhVLcJ0LjyqxOcUrVYAAAJzSURBVDjLhdP3V9pQFAfwEPNqyECCIEsQmYIaREBExAoiInXvvbd111FX1e699/pXe2MYaj3t94d7cl8+eUlOcrHc/wQTiqv9xjVpN6VBZOzhuOSvjD8YqxdBZFhRqqAoiqTcbjeVCSwO1wvANVqK8RiGMcrJZDIpHKXCk4pRE4BIg0JcZR53zHRMu7OEVzTUA5hQk+enqcmZuY65Z01sdg9SPQGgSkqmLng5+2p2uqJImQXSKgD5KcBQDR6PJ4/jsoKU5l8ApPSFd8E7L6Oz4hJQUpIFr/fdaxmNQEhZlr26A4bNL39e9lTQCIQGQqZAWRoouoPB4CcOIUQkgouLzyUkKS27AEj17Rp73Z0SGtGylRq7vaZbw14GEhEkqqtlK3V2e103IYLC9C3Ib0flRz8LhPjKIT6uSH0JmL8PDgwODe0M7tiiA07nQPQ95ysEkCcC3lx1r9nQ5nS2GZrv1jYbDDdrC1RIlQI8z/DKawAtEwFjtpjNFstvW6MtGoUyhDfabI3VBJECjOXt2vr6Wvuvzvudra1QRjZ+9PX1beAoAz4arTpj/4nRWnl2Vmk1nvQbddbK/luqDPiis+p0vccARkYAHPfqYKE3A+Ahv+r1Pfi+vlV/egplH++BHj5KeoeWD2GtVru9F9bGY7G4Nry3DW3Yj4s7JNRMy5uAIxSIxXcdB4eHB47deCwQcgQeNanoEgAyAE+niouL/auOzdDWVmjTseqHdsrfhBIuYS4YllQ+kcu78CW5XI4QlCW8S+gJxJ0PTg4PwofjCIcQhFBVQoEfwySOnkvDs2oNfTWowpQe3twcDt4o50pM2en+V/4ADiuBy0gwQ9YAAABXelRYdFJhdyBwcm9maWxlIHR5cGUgaXB0YwAAeJzj8gwIcVYoKMpPy8xJ5VIAAyMLLmMLEyMTS5MUAxMgRIA0w2QDI7NUIMvY1MjEzMQcxAfLgEigSi4A6hcRdPJCNZUAAAAASUVORK5CYII=",className:s.smallAvatar}),t.length>1?Object(a.jsx)(q.a,{className:s.device,children:Object(a.jsx)(W.a,{labelId:"device-select-label",id:"device-select",value:c||t[0],onChange:function(e){return n(e.target.value)},autoWidth:!0,classes:{select:s.white,icon:s.white},children:t.map((function(e){return Object(a.jsx)(K.a,{value:e,children:e},e)}))})}):t&&0!==t.length?Object(a.jsx)(A.a,{className:s.title,variant:"h6",noWrap:!0,children:"ezbeq"}):null,r]})})},H=n(25),_=n(196),Z=n(420),X=n(174),$=n.n(X),ee=n(175),te=n.n(ee),ne=n(194),ae=function(e){var t=e.items,n=e.selectedValues,c=e.label,r=e.placeholder,s=void 0===r?"":r,i=e.noOptionsText,o=e.limitTags,l=e.onToggleOption,u=e.onCreateOption,d=e.onClearOptions,j=e.getOptionLabel,b=void 0===j?function(e){return e}:j,f=e.isInView,p=void 0===f?function(e){return!0}:f;return Object(a.jsx)(Z.a,{multiple:!0,size:"small",disableCloseOnSelect:!0,freeSolo:"undefined"!==typeof d,selectOnFocus:!0,handleHomeEndKeys:!0,limitTags:o,options:t,value:n,noOptionsText:i,onChange:function(e,t,n){"select-option"===n||"remove-option"===n?l&&l(t):"clear"===n?d&&d():"create-option"===n?u&&u(t):console.log("Event: ".concat(e," Value: ").concat(t," Reason: ").concat(n))},renderOption:function(e,t){var n,c=t.selected;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ne.a,{color:"primary",icon:Object(a.jsx)($.a,{fontSize:"small"}),checkedIcon:Object(a.jsx)(te.a,{fontSize:"small"}),style:{marginRight:8},checked:c}),Object(a.jsx)("div",{style:(n=e,{textDecoration:p(n)?"none":"line-through"}),children:b(e)})]})},renderInput:function(e){return Object(a.jsx)(_.a,Object(H.a)(Object(H.a)({},e),{},{label:c,placeholder:s}))},getOptionLabel:b})};ae.defaultProps={limitTags:5,items:[],selectedValues:[]};var ce=ae,re=function(e){var t=e.visible,n=e.selectedAudioTypes,r=e.setSelectedAudioTypes,s=e.selectedFreshness,i=e.setSelectedFreshness,u=e.selectedYears,d=e.setSelectedYears,j=e.selectedLanguages,b=e.setSelectedLanguages,f=e.selectedAuthors,p=e.setSelectedAuthors,O=e.selectedContentTypes,h=e.setSelectedContentTypes,m=e.filteredEntries,g=e.setError,x=["Fresh","Updated","Stale"],y=Object(c.useState)([]),S=Object(l.a)(y,2),A=S[0],C=S[1],E=Object(c.useState)([]),k=Object(l.a)(E,2),N=k[0],T=k[1],I=Object(c.useState)([]),D=Object(l.a)(I,2),P=D[0],L=D[1],R=Object(c.useState)([]),V=Object(l.a)(R,2),F=V[0],G=V[1],M=Object(c.useState)([]),z=Object(l.a)(M,2),B=z[0],U=z[1],Q=Object(c.useState)([]),q=Object(l.a)(Q,2),W=q[0],K=q[1],Y=Object(c.useState)([]),J=Object(l.a)(Y,2),H=J[0],_=J[1],Z=Object(c.useState)([]),X=Object(l.a)(Z,2),$=X[0],ee=X[1],te=Object(c.useState)([]),ne=Object(l.a)(te,2),ae=ne[0],re=ne[1];Object(c.useEffect)((function(){w(C,v.getAuthors,g)}),[g]),Object(c.useEffect)((function(){w(T,v.getLanguages,g)}),[g]),Object(c.useEffect)((function(){w(L,v.getYears,g)}),[g]),Object(c.useEffect)((function(){w(G,v.getAudioTypes,g)}),[g]),Object(c.useEffect)((function(){w(U,v.getContentTypes,g)}),[g]),Object(c.useEffect)((function(){w(K,(function(){return Object(o.a)(new Set(m.map((function(e){return e.year}))))}),g),w(_,(function(){return Object(o.a)(new Set(m.map((function(e){return e.audioTypes})).flat()))}),g),w(re,(function(){return Object(o.a)(new Set(m.map((function(e){return e.freshness})).flat()))}),g),w(ee,(function(){return Object(o.a)(new Set(m.map((function(e){return e.language}))))}),g)}),[m,g]);return t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ce,{items:B,selectedValues:O,label:"Content Types",onToggleOption:function(e){return h(e)},onClearOptions:function(){return h([])}}),Object(a.jsx)(ce,{items:A,selectedValues:f,label:"Author",onToggleOption:function(e){return p(e)},onClearOptions:function(){return p([])}}),Object(a.jsx)(ce,{items:P,selectedValues:u,label:"Year",onToggleOption:function(e){return d(e)},onCreateOption:function(e){return function(e){var t=P.filter((function(t){return e.some((function(e){return e===t||"".concat(t).indexOf(e)>-1}))}));d(t)}(e)},onClearOptions:function(){return d([])},getOptionLabel:function(e){return"".concat(e)},isInView:function(e){return 0===W.length||W.indexOf(e)>-1}}),Object(a.jsx)(ce,{items:F,selectedValues:n,label:"Audio Types",onToggleOption:function(e){return r(e)},onCreateOption:function(e){return function(e){var t=F.filter((function(t){return e.some((function(e){return e===t||t.toLowerCase().indexOf(e.toLowerCase())>-1}))}));r(t)}(e)},onClearOptions:function(){return r([])},isInView:function(e){return 0===H.length||H.indexOf(e)>-1}}),Object(a.jsx)(ce,{items:x,selectedValues:s,label:"Fresh",onToggleOption:function(e){return i(e)},onCreateOption:function(e){return function(e){var t=x.filter((function(t){return e.some((function(e){return e===t||t.toLowerCase().indexOf(e.toLowerCase())>-1}))}));i(t)}(e)},onClearOptions:function(){return i([])},isInView:function(e){return 0===ae.length||ae.indexOf(e)>-1}}),Object(a.jsx)(ce,{items:N,selectedValues:j,label:"Language",onToggleOption:function(e){return b(e)},onCreateOption:function(e){return function(e){var t=N.filter((function(t){return e.some((function(e){return e===t||t.toLowerCase().indexOf(e.toLowerCase())>-1}))}));b(t)}(e)},onClearOptions:function(){return b([])},isInView:function(e){return 0===$.length||$.indexOf(e)>-1}})]}):null},se=n(101),ie=n(357),oe=n(98),le=n.n(oe),ue=n(3),de=n(6),je=n(409),be=n(356),fe=n(66),pe=n(63),Oe=n.n(pe),he=n(177),me=n.n(he),ve=n(178),ge=n.n(ve),xe=Object(d.a)((function(e){return{padTop:{paddingTop:e.spacing(1),width:"100%"},withoutLabel:{marginTop:e.spacing(1)},sized:{margin:e.spacing(.5),width:"22.5%"},zeroPad:{padding:0},tightPad:{paddingRight:0}}})),we=Object(de.a)({root:{"& .MuiOutlinedInput-adornedEnd":{paddingRight:"4px"}}})(_.a),ye=function(e){var t=e.fieldName,n=e.helpText,c=e.minGain,r=e.maxGain,s=e.step,i=e.dp,o=e.savedValues,l=e.values,u=e.setMV,d=e.setMute,j=xe(),b=1.1.toLocaleString().substring(1,2),f="."===b?/\./g:new RegExp(b,"g"),p=1/s,O=parseFloat(l.mv)!==parseFloat(o.mv)||l.mute!==o.mute,h=function(e,t){var n=Math.round(e*p)/p;u(n>r?r.toFixed(t):n<c?c.toFixed(t):n.toFixed(t))};return Object(a.jsx)(we,{className:Object(ue.a)(j.sized,j.withoutLabel,j.tightPad),variant:"outlined",id:t,value:l.mv,onChange:function(e){return function(e){if(e)if("-"===e)u(e);else if(0===r&&e.match("^[0-9]$"))u("-".concat(e));else{var t=(e.match(f)||[]).length;if(0===t){var n=parseFloat(e);isNaN(n)||h(n,0)}else if(1===t)if(e.charAt(e.length-1)===b)u(e);else{var a=parseFloat(e);if(!isNaN(a))if(i>1){var c=l.mv;Math.abs(a)<Math.abs(c)||e.length<c.toString().length?u(e):h(a,i)}else h(a,i)}}else u("")}(e.target.value)},"aria-describedby":"".concat(t,"-helper-text"),InputProps:{endAdornment:Object(a.jsx)(je.a,{position:"end",children:Object(a.jsx)(F.a,{"aria-label":"mute channel",onClick:function(e){return d(!l.mute)},className:j.zeroPad,color:O?"secondary":"default",children:l.mute?Object(a.jsx)(me.a,{fontSize:"small"}):Object(a.jsx)(ge.a,{fontSize:"small"})})})},inputProps:{"aria-label":t,pattern:"",inputMode:"numeric"},margin:"dense",size:"small",label:n})},Se=function(e){var t=e.selectedSlotId,n=e.deviceGains,r=e.gains,s=e.setGains,i=e.sendGains,o=e.isActive,u=xe(),d=Object(c.useState)(!0),j=Object(l.a)(d,2),b=j[0],f=j[1];return Object(c.useEffect)((function(){f(isNaN(r.master_mv)||r.gains.some((function(e){return isNaN(e)})))}),[r]),null!==t?Object(a.jsx)("div",{className:u.padTop,children:Object(a.jsx)(q.a,{component:"fieldset",children:Object(a.jsxs)(be.a,{row:!0,children:[Object(a.jsx)(ye,{fieldName:"master-gain",helpText:"Master",minGain:-127,maxGain:0,step:.5,dp:1,savedValues:{mv:n.master_mv,mute:n.master_mute},values:{mv:r.master_mv,mute:r.master_mute},setMV:function(e){return s(Object(H.a)(Object(H.a)({},r),{master_mv:e}))},setMute:function(e){return s(Object(H.a)(Object(H.a)({},r),{master_mute:e}))}}),r.gains.map((function(e,t){return Object(a.jsx)(ye,{fieldName:"input".concat(t,"-gain"),helpText:"Input ".concat(t+1),minGain:-72,maxGain:12,step:.25,dp:2,savedValues:{mv:n.gains[t],mute:n.mutes[t]},values:{mv:r.gains[t],mute:r.mutes[t]},setMV:function(e){return s(Object(H.a)(Object(H.a)({},r),{gains:r.gains.map((function(n,a){return a===t?e:n}))}))},setMute:function(e){return s(Object(H.a)(Object(H.a)({},r),{mutes:r.mutes.map((function(n,a){return a===t?e:n}))}))}},"input".concat(t))})),Object(a.jsx)(fe.a,{variant:"outlined",size:"small",color:"primary",className:u.sized,onClick:function(){return i(t,r)},disabled:b,startIcon:o()?Object(a.jsx)(ie.a,{size:24}):Object(a.jsx)(Oe.a,{fontSize:"small"}),children:"Apply"})]})})}):Object(a.jsx)("div",{})},Ae=Object(d.a)((function(e){return{root:{display:"flex",width:"100%"},container:{paddingLeft:4,paddingRight:4},fullWidth:{marginRight:0}}})),Ce=Object(d.a)((function(e){return{paper:function(t){return{margin:"".concat(e.spacing(.5),"px auto"),padding:e.spacing(.5),flexGrow:1,backgroundColor:t.selected?e.palette.action.selected:e.palette.background.default}},content:function(){return{padding:4,paddingLeft:8,"&:last-child":{paddingBottom:4}}},right:{float:"right"}}})),Ee=function(e,t,n){var a=e.find((function(e){return e.slotId===n&&e.action===t}));return a?a.state:-1},ke={master_mv:0,master_mute:!1,gains:[],mutes:[]},Ne=function(e){var t=e.selected,n=e.slot,c=e.onSelect,r=e.isPending,s=e.onClear,i=Ce({selected:t});return Object(a.jsx)(se.a,{className:"".concat(i.paper),children:Object(a.jsxs)(S.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(a.jsx)(S.a,{item:!0,onClick:c,xs:8,className:"".concat(i.content),children:Object(a.jsxs)(A.a,{component:"p",variant:"body2",children:[n.id,": ",n.last]})}),Object(a.jsx)(S.a,{item:!0,xs:4,children:Object(a.jsx)(F.a,{onClick:s,disabled:r,className:i.right,children:r?Object(a.jsx)(ie.a,{size:32}):Object(a.jsx)(le.a,{fontSize:"large"})})})]})})},Te=function(e){var t=e.selectedDeviceName,n=e.selectedSlotId,r=e.useWide,s=e.device,i=e.setDevice,o=e.setUserDriven,u=e.setError,d=Ae({selected:!1}),j=Object(c.useState)([]),b=Object(l.a)(j,2),f=b[0],h=b[1],m=Object(c.useState)(ke),g=Object(l.a)(m,2),x=g[0],w=g[1],y=Object(c.useState)({}),A=Object(l.a)(y,2),C=A[0],E=A[1];Object(c.useEffect)((function(){var e=Object(H.a)({},ke);if(e.master_mv=s.masterVolume,e.master_mute=s.mute,n&&s&&s.hasOwnProperty("slots")){var t=s.slots.find((function(e){return e.id===n}));e.gains=t.hasOwnProperty("gains")?t.gains:[],e.mutes=t.hasOwnProperty("mutes")?t.mutes:[]}E(e),w(e)}),[s,n]);var k,N,T=function(){var e=Object(O.a)(p.a.mark((function e(t,n,a){var c,r,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=s.length>3&&void 0!==s[3]?s[3]:null,h((function(e){return[{slotId:n,action:t,state:1}].concat(e)})),e.prev=2,e.next=5,a();case 5:r=e.sent,h((function(e){return e.filter((function(e){return!(e.slotId===n&&e.action===t)}))})),i(r),c&&c(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),u(e.t0),h((function(e){return e.map((function(e){return e.slotId===n&&e.action===t?{slotId:n,action:t,state:2}:e}))}));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n,a){return e.apply(this,arguments)}}(),I=(k="slots"in s?s.slots:[],N=2,k.reduce((function(e,t,n){return(n%N?e[e.length-1].push(t):e.push([t]))&&e}),[])).map((function(e,c){return Object(a.jsx)(S.a,{container:!0,className:d.root,children:e.map((function(c,r){return Object(a.jsx)(S.a,{container:!0,item:!0,xs:1===e.length?12:6,className:d.container,children:Object(a.jsx)(Ne,{selected:c.id===n,slot:c,onSelect:function(){return e=c.id,void T("activate",e,(function(){return v.activateSlot(t,e)}),(function(){return o(!0)}));var e},onClear:function(){return e=c.id,void T("clear",e,(function(){return v.clearSlot(t,e)}));var e},isPending:(s=c.id,1===Ee(f,"clear",s)||1===Ee(f,"activate",s))})},r);var s}))},c)}));if(s&&s.hasOwnProperty("masterVolume")){var D=Object(a.jsx)(Se,{selectedSlotId:n,deviceGains:C,gains:x,setGains:w,sendGains:function(e,n){T("gain",e,(function(){return v.setGains(t,e,n)}))},isActive:function(){return 1===Ee(f,"gain",n)}});return r?Object(a.jsxs)("div",{className:d.fullWidth,children:[I,Object(a.jsx)(S.a,{container:!0,children:D})]}):Object(a.jsxs)("div",{className:d.fullWidth,children:[Object(a.jsx)(S.a,{container:!0,direction:"column",children:I}),Object(a.jsx)(S.a,{container:!0,direction:"column",children:D})]})}return r?Object(a.jsx)(S.a,{container:!0,children:I}):Object(a.jsx)(S.a,{container:!0,direction:"column",children:I})},Ie=n(179),De=Object(d.a)((function(e){return{noLeft:{marginLeft:"0px"}}})),Pe=function(e){return e.formattedTitle},Le=function(e){var t=e.entries,n=e.setSelectedEntryId,c=e.selectedEntryId,r=e.useWide,s=e.showBottomNav,i=De(),o=[{field:"title",headerName:"Title",flex:.6,renderCell:function(e){return e.row.url?Object(a.jsx)("a",{href:e.row.avsUrl,target:"_beq",children:Pe(e.row)}):Pe(e.row)}},{field:"audioTypes",headerName:"Audio Type",flex:.4},{field:"sortTitle",hide:!0},{field:"edition",headerName:"Edition",hide:!r}];if(t.length>0){var l=s?40:0,u=Object(a.jsx)(S.a,{item:!0,style:{height:"".concat(Math.max(260,(window.innerHeight-310-l)/(-1===c||r?1:2)),"px"),width:"100%"},children:Object(a.jsx)(Ie.a,{rows:t,columns:o,pageSize:50,density:"compact",sortModel:[{field:"sortTitle",sort:"asc"}],onRowSelected:function(e){return n(e.data.id)}})});return r?u:Object(a.jsx)(S.a,{container:!0,className:i.noLeft,children:u})}return null},Re=n(358),Ve=n(419),Fe=n(410),Ge=n(411),Me=n(412),ze=n(413),Be=Object(d.a)({root:{}}),Ue=function(e){var t=[];return e.rating&&t.push(e.rating),e.runtime&&t.push("".concat(Math.floor(e.runtime/60),"h ").concat(e.runtime%60,"m")),e.language&&"English"!==e.language&&t.push(e.language),e.genres&&t.push(e.genres.join(", ")),t.push(e.author),t||e.overview?Object(a.jsxs)(a.Fragment,{children:[t?Object(a.jsx)(A.a,{variant:"body1",component:"p",children:t.join(" \u2022 ")}):null,e.overview?Object(a.jsx)(A.a,{variant:"body2",component:"p",children:e.overview}):null]}):null},Qe=function(e){return e&&e.audioTypes?e.audioTypes.map((function(e){return Object(a.jsxs)("span",{children:[Object(a.jsx)("br",{}),e]},e)})):null},qe=function(e){return e&&e.mvAdjust?Object(a.jsxs)("span",{children:[Object(a.jsx)("br",{}),"MV Adjustment: ",e.mvAdjust>0?"+":"",e.mvAdjust," dB"]}):null},We=function(e){return e&&e.note?Object(a.jsxs)("span",{children:[Object(a.jsx)("br",{}),e.note]}):null},Ke=function(e){return e&&e.warning?Object(a.jsxs)("span",{children:[Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Warning:"})," ",e.warning]}):null},Ye=function(e){var t=e.setUploadSlotId,n=e.slots,c=e.uploadSlotId,r=e.sendGain,s=e.selectedEntry,i=e.setSendGain,o=e.pending,l=e.upload,u=n.map((function(e){return Object(a.jsx)(Re.a,{value:e.id,control:Object(a.jsx)(Ve.a,{checked:c===e.id,color:"primary"}),label:e.id},e.id)})),d=n.length>1?Object(a.jsx)(Fe.a,{row:!0,"aria-label":"slot",name:"slot",onChange:function(e){return t(e.target.value)},children:u}):null,j=n.find((function(e){return e.id===c})),b=j&&j.inputs>0?Object(a.jsx)(Re.a,{control:Object(a.jsx)(ne.a,{checked:r,name:"sendMV",color:"primary",disabled:!s.mvAdjust,onChange:function(e){return i(e.target.checked)}}),label:"Set Input Gain"}):null;return Object(a.jsxs)(be.a,{row:!0,children:[d,b,Object(a.jsx)(fe.a,{variant:"contained",startIcon:o?Object(a.jsx)(ie.a,{size:24}):Object(a.jsx)(Oe.a,{fontSize:"small"}),onClick:l,children:"Upload"})]})},Je=function(e){var t=e.selectedDeviceName,n=e.selectedEntry,r=e.useWide,s=e.setDevice,i=e.selectedSlotId,u=e.device,d=e.setError,j=Be(),b=Object(c.useMemo)((function(){return u&&u.hasOwnProperty("slots")?u.slots:[]}),[u]),f=Object(c.useState)(null),h=Object(l.a)(f,2),m=h[0],g=h[1],x=Object(c.useState)(!1),w=Object(l.a)(x,2),y=w[0],S=w[1],C=Object(c.useState)(!1),E=Object(l.a)(C,2),k=E[0],N=E[1],T=Object(c.useState)(!1),I=Object(l.a)(T,2),D=I[0],P=I[1];Object(c.useEffect)((function(){S(!1)}),[n]),Object(c.useEffect)((function(){var e=b.find((function(e){return e.id===m})),t=e&&u.hasOwnProperty("masterVolume")&&e.inputs>0;P(t)}),[u,b,m]),Object(c.useEffect)((function(){m||g(i)}),[m,i]);var L,R=function(){var e=Object(O.a)(p.a.mark((function e(){var a,c,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.find((function(e){return e.id===m})),c={gains:Object(o.a)(Array(a.inputs)).map((function(e,t){return y?parseFloat(n.mvAdjust):0})),mutes:y?Object(o.a)(Array(a.inputs)).map((function(e,t){return!1})):[]},N(!0),e.prev=3,r=D?function(){return v.loadWithMV(t,n.id,m,c)}:function(){return v.sendFilter(t,n.id,m)},e.next=7,r();case 7:i=e.sent,N(!1),s(i),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),d(e.t0),N(!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}();if(n){var V=n.images?n.images.map((function(e,t){return Object(a.jsx)(Ge.a,{component:"img",className:j.media,image:e,title:"img".concat(t),alt:"".concat(n.title," - ").concat(t)},"img".concat(t))})):null,F=Object(a.jsxs)(Me.a,{children:[Object(a.jsxs)(A.a,{gutterBottom:!0,variant:"h5",component:"h3",children:[n.title,n.year?" (".concat(n.year,")"):""]}),n.edition?Object(a.jsx)(A.a,{variant:"h6",component:"p",children:n.edition}):null,n.altTitle&&n.altTitle!==n.title?Object(a.jsx)(A.a,{variant:"h6",component:"p",children:n.altTitle}):null,Ue(n),Object(a.jsx)("br",{}),Object(a.jsxs)(A.a,{variant:"body2",color:"textSecondary",component:"p",children:[(L=n,L&&L.season?L.episodes?/^\d+$/.test(L.episodes)?"S".concat(L.season," E").concat(L.episodes):"S".concat(L.season," ").concat(L.episodes):"S".concat(L.season):null),Qe(n),qe(n),We(n),Ke(n)]})]}),G=Object(a.jsx)(Me.a,{children:Object(a.jsx)(Ye,{setUploadSlotId:g,uploadSlotId:m,sendGain:y,slots:b,selectedEntry:n,setSendGain:S,pending:k,upload:R})}),M=Object(a.jsxs)(be.a,{row:!0,children:[n.theMovieDB?Object(a.jsx)(fe.a,{size:"small",color:"primary",href:"https://themoviedb.org/".concat("film"===n.contentType?"movie":"tv","/").concat(n.theMovieDB),target:"_avs",children:"TMDb"}):null,n.avsUrl?Object(a.jsx)(fe.a,{size:"small",color:"primary",href:n.avsUrl,target:"_avs",children:"Discuss"}):null,n.beqcUrl?Object(a.jsx)(fe.a,{size:"small",color:"primary",href:n.beqcUrl,target:"_beq",children:"Catalogue"}):null]});return r?Object(a.jsxs)(ze.a,{className:j.root,children:[F,G,M,V]}):Object(a.jsxs)(ze.a,{className:j.root,children:[G,F,M,V]})}return null},He=n(180),_e=n.n(He),Ze=n(195),Xe=n(359),$e=n(9),et=Object(d.a)((function(e){return{search:Object(u.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object($e.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object($e.c)(e.palette.common.white,.25)},width:"40%"},e.breakpoints.up("md"),{flexGrow:1}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)")},advancedFilter:{marginLeft:"4px",marginRight:"0px"}}})),tt=function(e){var t=e.txtFilter,n=e.setTxtFilter,c=e.showFilters,r=e.toggleShowFilters,s=et();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:s.search,children:[Object(a.jsx)("div",{className:s.searchIcon,children:Object(a.jsx)(_e.a,{})}),Object(a.jsx)(Ze.a,{placeholder:"Search\u2026",classes:{root:s.inputRoot,input:s.inputInput},inputProps:{"aria-label":"search"},value:t,onChange:function(e){return n(e.target.value)},size:"small",fullWidth:!0})]}),Object(a.jsx)(F.a,{onClick:function(e){return n("")},children:Object(a.jsx)(le.a,{})}),Object(a.jsx)(Re.a,{className:s.advancedFilter,control:Object(a.jsx)(Xe.a,{checked:c,onChange:r,size:"small"})})]})},nt=function(e){var t=e.entries,n=e.availableDevices,r=e.setErr,s=e.replaceDevice,i=e.selectedDeviceName,o=e.setSelectedDeviceName,u=e.showBottomNav,d=e.selectedSlotId,j=e.setSelectedSlotId,b=e.getSelectedDevice,f=y("selectedAuthors",[]),p=Object(l.a)(f,2),O=p[0],h=p[1],m=Object(c.useState)([]),v=Object(l.a)(m,2),x=v[0],A=v[1],C=Object(c.useState)([]),E=Object(l.a)(C,2),k=E[0],N=E[1],T=Object(c.useState)([]),I=Object(l.a)(T,2),D=I[0],P=I[1],L=Object(c.useState)([]),R=Object(l.a)(L,2),V=R[0],F=R[1],G=Object(c.useState)([]),M=Object(l.a)(G,2),z=M[0],B=M[1],U=Object(c.useState)(""),Q=Object(l.a)(U,2),q=Q[0],W=Q[1],K=Object(c.useState)(!1),Y=Object(l.a)(K,2),H=Y[0],_=Y[1],Z=Object(c.useState)(-1),X=Object(l.a)(Z,2),$=X[0],ee=X[1],te=Object(c.useState)(!1),ne=Object(l.a)(te,2),ae=ne[0],ce=ne[1],se=Object(c.useState)([]),ie=Object(l.a)(se,2),oe=ie[0],le=ie[1];Object(c.useEffect)((function(){if(n&&!i){var e=Object.keys(n);e.length>0&&o(e[0])}}),[n,i,o]),Object(c.useEffect)((function(){var e=function(e){return!(O.length&&!(O.indexOf(e.author)>-1)||k.length&&!(k.indexOf(e.year)>-1)||D.length&&!e.audioTypes.some((function(e){return D.indexOf(e)>-1}))||V.length&&!(V.indexOf(e.contentType)>-1)||z.length&&!(z.indexOf(e.freshness)>-1)||x.length&&!(x.indexOf(e.language)>-1)||q&&!function(e){var t=q.toLowerCase();return!!e.formattedTitle.toLowerCase().includes(t)||!(!e.hasOwnProperty("altTitle")||!e.altTitle.toLowerCase().includes(t))||!(!e.hasOwnProperty("collection")||!e.collection.toLowerCase().includes(t))}(e))};w(le,(function(){return t.filter(e)}),r)}),[t,D,k,O,V,z,x,q,r]),Object(c.useEffect)((function(){var e=b();if(e&&ae&&e.hasOwnProperty("slots")){var t=e.slots.find((function(e){return e.id===d}));t&&t.last&&"ERROR"!==t.last&&"Empty"!==t.last&&W(t.last)}}),[b,d,W,ae]);var ue=Object(g.a)("(orientation: landscape) and (min-height: 580px)"),de=Object(a.jsx)(Te,{selectedDeviceName:i,selectedEntryId:$,selectedSlotId:d,useWide:ue,setSelectedSlotId:j,setUserDriven:ce,device:b(),setDevice:function(e){return s(e)},setError:r}),je=Object(a.jsx)(Le,{entries:oe,setSelectedEntryId:ee,selectedEntryId:$,useWide:ue,showBottomNav:u}),be=Object(a.jsx)(Je,{selectedDeviceName:i,selectedEntry:$?t.find((function(e){return e.id===$})):null,useWide:ue,setDevice:function(e){return s(e)},selectedSlotId:d,device:b(),setError:r});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(J,{availableDeviceNames:Object.keys(n),setSelectedDeviceName:o,selectedDeviceName:i,children:Object(a.jsx)(tt,{txtFilter:q,setTxtFilter:W,showFilters:H,toggleShowFilters:function(){_((function(e){return!e}))}})}),Object(a.jsx)(re,{visible:H,selectedAudioTypes:D,setSelectedAudioTypes:P,selectedFreshness:z,setSelectedFreshness:B,selectedYears:k,setSelectedYears:N,selectedLanguages:x,setSelectedLanguages:A,selectedAuthors:O,setSelectedAuthors:h,selectedContentTypes:V,setSelectedContentTypes:F,filteredEntries:oe,setError:r}),ue?Object(a.jsxs)(S.a,{container:!0,children:[Object(a.jsxs)(S.a,{item:!0,xs:6,md:6,children:[de,Object(a.jsx)(S.a,{container:!0,children:je})]}),Object(a.jsx)(S.a,{item:!0,xs:6,md:6,children:be})]}):Object(a.jsxs)(a.Fragment,{children:[de,je,be]})]})},at=n(181),ct=n.n(at),rt=Object(d.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},textField:{width:"10ch"}}})),st=function(e){var t=e.duration,n=e.setDuration,r=e.recording,s=e.setRecording,i=e.direct,o=e.setDirect,u=e.showAdvanced,d=e.minidspRs,j=e.setMinidspRs,b=rt(),f=Object(c.useState)(window.location.hostname),p=Object(l.a)(f,2),O=p[0],h=p[1],m=Object(c.useState)(0),v=Object(l.a)(m,2),g=v[0],x=v[1],w=Object(c.useState)(5380),y=Object(l.a)(w,2),S=y[0],A=y[1];return Object(c.useEffect)((function(){d?(h(d.host),x(d.device),A(d.port)):(h(window.location.hostname),x(0),A(5380))}),[d]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("form",{className:Object(ue.a)(b.root,b.margin),noValidate:!0,autoComplete:"off",children:[Object(a.jsx)(_.a,{id:"duration-seconds",label:"Duration",type:"number",inputProps:{"aria-label":"duration",min:1,step:1,max:7200},value:t,onChange:function(e){return n(e.target.value)},InputLabelProps:{shrink:!0}}),Object(a.jsx)(Re.a,{className:b.margin,control:Object(a.jsx)(Xe.a,{checked:r,onChange:function(e){return s(e.target.checked)},name:"recording",color:"primary"}),label:"Recording?"}),u?Object(a.jsx)(Re.a,{className:b.margin,control:Object(a.jsx)(Xe.a,{checked:i,onChange:function(e){return o(e.target.checked)},name:"direct",color:"secondary",size:"small"}),label:"Direct"}):null]}),u?Object(a.jsxs)("form",{className:Object(ue.a)(b.root,b.margin),noValidate:!0,autoComplete:"off",children:[Object(a.jsx)(_.a,{className:b.margin,id:"minidsp-rs-ip",label:"minidsprs host or ip",value:O,onChange:function(e){return h(e.target.value)}}),Object(a.jsx)(_.a,{className:Object(ue.a)(b.margin,b.textField),id:"minidsp-rs-device_id",label:"device id",type:"number",min:0,step:1,max:10,value:g,onChange:function(e){return x(e.target.value)}}),Object(a.jsx)(_.a,{className:Object(ue.a)(b.margin,b.textField),id:"minidsp-rs-port",label:"port",type:"number",min:1,step:1,value:S,onChange:function(e){return A(e.target.value)},InputLabelProps:{shrink:!0}}),Object(a.jsx)(fe.a,{variant:"contained",color:"primary",startIcon:Object(a.jsx)(ct.a,{}),size:"small",onClick:function(){return j({host:O,port:S,device:g})},children:"Apply"})]}):null]})},it=n(182),ot=n.n(it),lt=(n(223),function(e){var t=e.options,n=e.data;return Object(a.jsx)(ot.a,{options:t,data:n})}),ut=n(37),dt=n(183),jt=new Error("No data in levels update"),bt=function(e){var t=e.availableDevices,n=e.selectedDeviceName,r=e.setSelectedDeviceName,s=e.setErr,i=Object(c.useState)(!0),u=Object(l.a)(i,2),d=u[0],j=u[1],b=y("chartDuration",60),f=Object(l.a)(b,2),p=f[0],O=f[1],h=y("chartDirect",!1),m=Object(l.a)(h,2),v=m[0],g=m[1],x=Object(c.useState)(60),w=Object(l.a)(x,2),S=w[0],A=w[1],C=y("chartMinidspRs",{host:window.location.hostname,device:0,port:5380}),E=Object(l.a)(C,2),k=E[0],N=E[1],T=Object(c.useState)(!1),I=Object(l.a)(T,2),D=I[0],P=I[1],L=Object(c.useState)(null),R=Object(l.a)(L,2),V=R[0],F=R[1],G=Object(c.useState)({payload:[[],[],[],[],[],[],[]],first:0}),M=Object(l.a)(G,2),z=M[0],B=M[1],U=Object(c.useRef)(null),Q=Object(ut.a)(),q={series:[{label:"Time"},{label:"I1",stroke:Q.palette.primary.light,points:{show:!1}},{label:"I2",stroke:Q.palette.secondary.light,points:{show:!1}},{label:"O1",stroke:Q.palette.error.light,points:{show:!1}},{label:"O2",stroke:Q.palette.warning.light,points:{show:!1}},{label:"O3",stroke:Q.palette.info.light,points:{show:!1}},{label:"O4",stroke:Q.palette.success.light,points:{show:!1}}],axes:[{label:"Time (s)",stroke:Q.palette.text.primary,ticks:{stroke:Q.palette.divider},grid:{stroke:Q.palette.divider}},{label:"Level (dB)",stroke:Q.palette.text.primary,ticks:{stroke:Q.palette.divider},grid:{stroke:Q.palette.divider}}],scales:{x:{time:!1}}},W=Object(c.useMemo)((function(){return Object(dt.debounce)((function(e){A(e)}),400)}),[]);Object(c.useEffect)((function(){W(p)}),[p,W]),Object(c.useEffect)((function(){if(d&&V)if(0===Object.keys(V).length)s(jt);else if(V.hasOwnProperty("masterVolume"));else if(V.hasOwnProperty("input_levels")||V.hasOwnProperty("input")){var e=V.hasOwnProperty("input_levels")?[(new Date).getTime()/1e3].concat(Object(o.a)(V.input_levels),Object(o.a)(V.output_levels)):[V.ts].concat(Object(o.a)(V.input),Object(o.a)(V.output));B((function(t){return t.payload[0].length>0?t.payload=e.map((function(e,n){return[].concat(Object(o.a)(t.payload[n]),0===n?[e-t.first]:[e])})):(t.first=e[0],t.payload=e.map((function(e,n){return 0===n?[e-t.first]:[e]}))),function(e,t){var n=e.payload[0],a=n[0],c=n[n.length-1]-t;if(c>a){var r=n.findIndex((function(e){return e>=c}));return{first:e.first,payload:e.payload.map((function(e){return e.slice(r)}))}}return{first:e.first,payload:e.payload}}(t,S)}))}else v&&V.hasOwnProperty("master")||s(new Error("Unexpected data ".concat(V)))}),[d,V,v,s,S]),Object(c.useEffect)((function(){var e=v?"ws://".concat(k.host,":").concat(k.port,"/devices/").concat(k.device,"?levels=true"):"ws://".concat(window.location.host,"/ws");return null===U.current&&(U.current=new WebSocket(e),U.current.onerror=function(t){s(new Error("Failed to connect to ".concat(e)))},U.current.onopen=function(t){console.log("Connected to ".concat(e)),v||U.current.send("subscribe levels ".concat(n))},U.current.onclose=function(t){console.log("Closed connection to ".concat(e," - ").concat(t.code))},U.current.onmessage=function(e){return F(JSON.parse(e.data))}),function(){U.current.close(),U.current=null}}),[n,s,k,v]);var K=Object.assign({},q,{width:window.innerWidth-16,height:window.innerHeight-233});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(J,{availableDeviceNames:Object.keys(t),setSelectedDeviceName:r,selectedDeviceName:n,children:Object(a.jsx)(Re.a,{control:Object(a.jsx)(Xe.a,{checked:D,onChange:function(e){return P(e.target.checked)},size:"small"})})}),Object(a.jsx)(st,{duration:p,setDuration:O,recording:d,setRecording:j,direct:v,setDirect:g,showAdvanced:D,minidspRs:k,setMinidspRs:N}),Object(a.jsx)(lt,{options:K,data:z.payload})]})},ft=n(125),pt=n(407),Ot=n(424),ht=Object(d.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},root:{"& .MuiTextField-root":{margin:e.spacing(1)}}}})),mt={PaperProps:{style:{maxHeight:224,width:250}}},vt=function(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}},gt=function(e){var t=e.name,n=e.values,c=e.availableValues,r=e.onChange,s=ht(),i=Object(ut.a)();return Object(a.jsxs)(q.a,{className:s.formControl,children:[Object(a.jsx)(ft.a,{id:"".concat(t,"-label"),children:t}),Object(a.jsx)(W.a,{labelId:"".concat(t,"-label"),id:t,multiple:!0,value:n,onChange:r,input:Object(a.jsx)(pt.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(a.jsx)("div",{className:s.chips,children:e.map((function(e){return Object(a.jsx)(Ot.a,{label:e,className:s.chip},e)}))})},MenuProps:mt,children:c.map((function(e){return Object(a.jsx)(K.a,{value:e,style:vt(e,n,i),children:e},"".concat(t,"-").concat(e))}))})]})},xt=function(e){var t=e.availableDevices,n=e.setSelectedDeviceName,r=e.selectedDeviceName,s=e.selectedSlotId,i=e.setErr,o=ht(),u=y("minidspInputs.".concat(r,".").concat(s),[]),d=Object(l.a)(u,2),j=d[0],b=d[1],f=y("minidspOutputs.".concat(r,".").concat(s),[]),h=Object(l.a)(f,2),m=h[0],g=h[1],x=y("minidsp.".concat(r,".commandType"),"bq"),w=Object(l.a)(x,2),A=w[0],C=w[1],E=Object(c.useState)(s),k=Object(l.a)(E,2),N=k[0],T=k[1],I=Object(c.useState)(""),D=Object(l.a)(I,2),P=D[0],L=D[1],R=Object(c.useState)(!0),V=Object(l.a)(R,2),F=V[0],G=V[1],M=Object(c.useState)(!1),z=Object(l.a)(M,2),B=z[0],U=z[1],Q=Object(c.useState)([]),Y=Object(l.a)(Q,2),H=Y[0],Z=Y[1],X=Object(c.useState)([]),$=Object(l.a)(X,2),ee=$[0],te=$[1],ne=function(){var e=Object(O.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.prev=1,e.next=4,v.sendTextCommands(r,N,j,m,A,P,F);case 4:t=e.sent,console.debug(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i(e.t0);case 11:return e.prev=11,U(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(t&&r&&s){var e=t[r].slots.find((function(e){return e.id===s}));Z(Array.from(Array(e.inputs).keys()).map((function(e){return e+1}))),te(Array.from(Array(e.outputs).keys()).map((function(e){return e+1})))}}),[t,r,s]),Object(c.useEffect)((function(){j.some((function(e){return!H.includes(e)}))&&b(j.filter((function(e){return H.includes(e)})))}),[b,H,j]),Object(c.useEffect)((function(){m.some((function(e){return!ee.includes(e)}))&&g(m.filter((function(e){return ee.includes(e)})))}),[g,ee,m]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(J,{availableDeviceNames:Object.keys(t),setSelectedDeviceName:n,selectedDeviceName:r}),Object(a.jsx)("form",{className:o.root,noValidate:!0,autoComplete:"off",children:Object(a.jsxs)(S.a,{container:!0,children:[Object(a.jsxs)(S.a,{container:!0,justify:"space-evenly",alignItems:"center",children:[Object(a.jsx)(S.a,{item:!0,children:Object(a.jsxs)(q.a,{className:o.formControl,children:[Object(a.jsx)(ft.a,{id:"config-label",children:"Config"}),Object(a.jsx)(W.a,{labelId:"config-label",id:"config",value:N,onChange:function(e){return T(e.target.value)},children:[1,2,3,4].map((function(e){return Object(a.jsx)(K.a,{value:e,children:e},e)}))})]})}),H.length>0?Object(a.jsx)(S.a,{item:!0,children:Object(a.jsx)(gt,{name:"Input",onChange:function(e){return b(e.target.value.sort())},availableValues:H,values:j},"input")}):null,ee.length>0?Object(a.jsx)(S.a,{item:!0,children:Object(a.jsx)(gt,{name:"Output",onChange:function(e){return g(e.target.value.sort())},availableValues:ee,values:m},"output")}):null,Object(a.jsx)(S.a,{item:!0,children:Object(a.jsx)(Re.a,{control:Object(a.jsx)(Xe.a,{checked:F,onChange:function(e){return G(e.target.checked)},color:"default",name:"overwrite"}),labelPlacement:"top",label:"Overwrite?"})}),Object(a.jsx)(S.a,{item:!0,children:Object(a.jsxs)(q.a,{className:o.formControl,children:[Object(a.jsx)(ft.a,{id:"mode-label",children:"Mode"}),Object(a.jsxs)(W.a,{labelId:"mode-label",id:"mode",value:A,onChange:function(e){return C(e.target.value)},children:[Object(a.jsx)(K.a,{value:"bq",children:"Biquads"},"bq"),Object(a.jsx)(K.a,{value:"filt",children:"Filters"},"filt"),Object(a.jsx)(K.a,{value:"rs",children:"RS"},"rs")]})]})}),Object(a.jsx)(S.a,{item:!0,children:Object(a.jsx)(fe.a,{variant:"outlined",color:"primary",onClick:ne,disabled:0===P.length,startIcon:B?Object(a.jsx)(ie.a,{size:24}):Object(a.jsx)(Oe.a,{fontSize:"small"}),children:"Upload"})})]}),Object(a.jsx)(S.a,{container:!0,item:!0,children:Object(a.jsx)(_.a,{id:"commands",label:"bq"===A?"Biquads":"filt"===A?"Filters":"Minidsp RS",multiline:!0,rows:26,fullWidth:!0,value:P,onChange:function(e){return L(e.target.value)},variant:"outlined"})})]})})]})},wt=Object(d.a)((function(e){return{root:{flexGrow:1,width:"100vw",height:"100vh"}}})),yt=new WebSocket("ws://"+window.location.host+"/ws"),St=function(){var e=Object(g.a)("(prefers-color-scheme: dark)"),t=r.a.useMemo((function(){return Object(j.a)({palette:{type:e?"dark":"light"}})}),[e]),n=function(e){F(Object.assign({},V,Object(u.a)({},e.name,e)))};yt.onmessage=function(e){n(JSON.parse(e.data))};var s=wt(),i=Object(c.useState)(!1),d=Object(l.a)(i,2),f=d[0],p=d[1],O=Object(c.useState)(null),h=Object(l.a)(O,2),m=h[0],y=h[1],S=Object(c.useState)([]),A=Object(l.a)(S,2),C=A[0],T=A[1],D=Object(c.useState)({}),L=Object(l.a)(D,2),V=L[0],F=L[1],G=Object(c.useState)(null),M=Object(l.a)(G,2),B=M[0],U=M[1],Q=Object(c.useState)(""),q=Object(l.a)(Q,2),W=q[0],K=q[1],Y=Object(c.useState)("catalogue"),J=Object(l.a)(Y,2),H=J[0],_=J[1];Object(c.useEffect)((function(){w(T,v.load,y)}),[]),Object(c.useEffect)((function(){w(F,v.getDevices,y)}),[]),Object(c.useEffect)((function(){p(Object(o.a)(Object.keys(V)).find((function(e){return V[e].hasOwnProperty("masterVolume")})))}),[V,p]);var Z=Object(c.useCallback)((function(){return W&&V.hasOwnProperty(W)?V[W]:{}}),[W,V]);return Object(c.useEffect)((function(){var e=Z();if(e&&e.hasOwnProperty("slots")){var t=e.slots.find((function(e){return!0===e.active}));t&&U(t.id)}}),[Z,W,V]),Object(a.jsxs)(b.a,{theme:t,children:[Object(a.jsx)(x.a,{}),Object(a.jsxs)("div",{className:s.root,children:[Object(a.jsx)(z,{err:m,setErr:y}),"catalogue"===H?Object(a.jsx)(nt,{entries:C,setErr:y,replaceDevice:n,availableDevices:V,selectedDeviceName:W,setSelectedDeviceName:K,getSelectedDevice:Z,selectedSlotId:B,setSelectedSlotId:U,showBottomNav:f}):"levels"===H?Object(a.jsx)(bt,{availableDevices:V,selectedDeviceName:W,setSelectedDeviceName:K,setErr:y}):Object(a.jsx)(xt,{availableDevices:V,selectedDeviceName:W,setSelectedDeviceName:K,selectedSlotId:B,setErr:y}),f?Object(a.jsxs)(k.a,{value:H,onChange:function(e,t){_(t)},children:[Object(a.jsx)(N.a,{label:"Catalogue",value:"catalogue",icon:Object(a.jsx)(I.a,{})}),Object(a.jsx)(N.a,{label:"Levels",value:"levels",icon:Object(a.jsx)(P.a,{})}),Object(a.jsx)(N.a,{label:"Control",value:"control",icon:Object(a.jsx)(R.a,{})})]}):null,Object(a.jsx)(E,{})]})]})};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(St,{})}),document.getElementById("root"))}},[[352,1,2]]]);
//# sourceMappingURL=main.058a1552.chunk.js.map