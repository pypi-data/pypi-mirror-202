# general tools

jar: &JAR
  executable_cmdline: [java, -jar, "{absolute_path}"]

py: &PY
  executable_cmdline: [python, -m, "{name}"]

GENERAL_TOOL_BAKSMALI:
  <<: *JAR
  version: 2.5.2
  download_url: https://bitbucket.org/JesusFreke/smali/downloads/baksmali-{version}.jar

GENERAL_TOOL_SMALI:
  <<: *JAR
  version: 2.5.2
  download_url: https://bitbucket.org/JesusFreke/smali/downloads/smali-{version}.jar

GENERAL_TOOL_APKTOOL:
  <<: *JAR
  version: 2.7.0
  download_url: https://bitbucket.org/iBotPeaches/apktool/downloads/apktool_{version}.jar

GENERAL_TOOL_APPCRAWLER:
  <<: *JAR
  version: 2.7.4
  download_url: https://github.com/seveniruby/AppCrawler/releases/download/{version}/appcrawler-{version}-hogwarts.jar

GENERAL_TOOL_XPATCH:
  <<: *JAR
  version: 5.1
  download_url: https://github.com/WindySha/Xpatch/releases/download/v{version}/xpatch-{version}.jar

GENERAL_TOOL_TIDEVICE:
  <<: *PY

GENERAL_TOOL_JAVA:
  cmdline: java
  version: 11.0.18
  download_url:
    case:
      - when: {system: darwin}
        then: https://github.com/SAP/SapMachine/releases/download/sapmachine-{version}/sapmachine-jre-{version}_macos-x64_bin.tar.gz
      - when: {system: linux}
        then: https://github.com/SAP/SapMachine/releases/download/sapmachine-{version}/sapmachine-jre-{version}_linux-x64_bin.tar.gz
      - when: {system: windows}
        then: https://github.com/SAP/SapMachine/releases/download/sapmachine-{version}/sapmachine-jre-{version}_windows-x64_bin.zip
      - else: ~
  unpack_path: java-{version}
  target_path:
    case:
      - when: {system: darwin}
        then: sapmachine-jre-{version}.jre/Contents/Home/bin/java
      - when: {system: linux}
        then: sapmachine-jre-{version}/bin/java
      - when: {system: windows}
        then: sapmachine-jre-{version}/bin/java.exe
      - else: ~

GENERAL_TOOL_DEX2JAR: &GENERAL_TOOL_DEX2JAR
  version: 2.2-SNAPSHOT
  version_suffix: -2021-10-31
  download_url: https://github.com/pxb1988/dex2jar/releases/download/v{version}{version_suffix}/dex-tools-{version}{version_suffix}.zip
  unpack_path: dex2jar-{version}
  target_path:
    case:
      - when: {system: [darwin, linux]}
        then: dex-tools-{version}/d2j-dex2jar.sh
      - when: {system: windows}
        then: dex-tools-{version}/d2j-dex2jar.bat
      - else: ~

GENERAL_TOOL_JAR2DEX:
  <<: *GENERAL_TOOL_DEX2JAR
  target_path:
    case:
      - when: {system: [darwin, linux]}
        then: dex-tools-{version}/d2j-jar2dex.sh
      - when: {system: windows}
        then: dex-tools-{version}/d2j-jar2dex.bat
      - else: ~

GENERAL_TOOL_ADB: &GENERAL_TOOL_ADB
  cmdline: adb
  download_url: https://dl.google.com/android/repository/platform-tools-latest-{system}.zip
  unpack_path: platform-tools
  target_path:
    case:
      - when: {system: [darwin, linux]}
        then: platform-tools/adb
      - when: {system: windows}
        then: platform-tools/adb.exe
      - else: ~

GENERAL_TOOL_FASTBOOT:
  <<: *GENERAL_TOOL_ADB
  cmdline: fastboot
  target_path:
    case:
      - when: {system: [darwin, linux]}
        then: platform-tools/fastboot
      - when: {system: windows}
        then: platform-tools/fastboot.exe
      - else: ~

GENERAL_TOOL_AAPT: &GENERAL_TOOL_AAPT
  cmdline: aapt
  version: r33
  version_name: android-13
  download_url:
    case:
      - when: {system: darwin}
        then: https://dl.google.com/android/repository/build-tools_{version}-macosx.zip
      - when: {system: linux}
        then: https://dl.google.com/android/repository/build-tools_{version}-linux.zip
      - when: {system: windows}
        then: https://dl.google.com/android/repository/build-tools_{version}-windows.zip
      - else: ~
  unpack_path: build-tools-{version}
  target_path:
    case:
      - when: {system: [darwin, linux]}
        then: "{version_name}/aapt"
      - when: {system: windows}
        then: "{version_name}/aapt.exe"
      - else: ~

GENERAL_TOOL_APKSIGNER:
  <<: *GENERAL_TOOL_AAPT
  cmdline: apksigner
  target_path:
    case:
      - when: {system: [darwin, linux]}
        then: "{version_name}/apksigner"
      - when: {system: windows}
        then: "{version_name}/apksigner.bat"
      - else: ~

GENERAL_TOOL_ZIPALIGN:
  <<: *GENERAL_TOOL_AAPT
  cmdline: zipalign
  target_path:
    case:
      - when: { system: [darwin, linux] }
        then: "{version_name}/zipalign"
      - when: { system: windows }
        then: "{version_name}/zipalign.exe"
      - else: ~

GENERAL_TOOL_JADX: &GENERAL_TOOL_JADX
  version: 1.4.6
  download_url: https://github.com/skylot/jadx/releases/download/v{version}/jadx-{version}.zip
  unpack_path: jadx-{version}
  target_path:
    case:
      - when: {system: [darwin, linux]}
        then: bin/jadx
      - when: {system: windows}
        then: bin/jadx.bat
      - else: ~

GENERAL_TOOL_JADX_GUI:
  <<: *GENERAL_TOOL_JADX
  name: jadx-gui
  target_path:
    case:
      - when: {system: [darwin, linux]}
        then: bin/jadx-gui
      - when: {system: windows}
        then: bin/jadx-gui.bat
      - else: ~

GENERAL_TOOL_CHROMEDRIVER:
  cmdline: chromedriver
  version: 80.0.3987.106
  base_url: http://chromedriver.storage.googleapis.com
  download_url:
    case:
      - when: {system: darwin}
        then: "{base_url}/{version}/chromedriver_mac64.zip"
      - when: {system: linux}
        then: "{base_url}/{version}/chromedriver_linux64.zip"
      - when: {system: windows}
        then: "{base_url}/{version}/chromedriver_win32.zip"
      - else: ~
  unpack_path: chromedriver-{version}
  target_path:
    case:
      - when: {system: [darwin, linux]}
        then: chromedriver
      - when: {system: windows}
        then: chromedriver.exe
      - else: ~

GENERAL_TOOL_SIB:
  version: 1.3.10-20230404
  download_url:
    case:
      - when: {system: darwin}
        then: https://github.com/ice-black-tea/sonic-ios-bridge/releases/download/v{version}/sonic-ios-bridge_{version}_macosx_x86_64.tar.gz
      - when: {system: linux}
        then: https://github.com/ice-black-tea/sonic-ios-bridge/releases/download/v{version}/sonic-ios-bridge_{version}_linux_x86_64.tar.gz
      - when: {system: windows}
        then: https://github.com/ice-black-tea/sonic-ios-bridge/releases/download/v{version}/sonic-ios-bridge_{version}_windows_x86_64.tar.gz
      - else: ~
  unpack_path: sib-{version}
  target_path:
    case:
      - when: { system: [ darwin, linux ] }
        then: sib
      - when: { system: windows }
        then: sib.exe
      - else: ~

GENERAL_TOOL_IPATOOL:
  version: 1.1.4
  download_url:
    case:
      - when: {system: darwin}
        then: https://github.com/majd/ipatool/releases/download/v{version}/ipatool-macos-v{version}.zip
      - else: ~
  unpack_path: ipatool-{version}
  target_path: ipatool
