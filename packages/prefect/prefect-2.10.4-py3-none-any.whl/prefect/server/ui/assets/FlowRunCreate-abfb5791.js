import{aD as x,d as D,T as k,a as B,aE as F,c,aF as I,G as N,u as a,e as O,w as d,h as T,g as V,x as G,o as J,j as i,aG as b,aH as P,aI as M,aJ as U,V as y,aB as f}from"./index-1bb2d7f7.js";import{u as j}from"./usePageTitle-d4ce3b8c.js";class A extends x{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const K=D({__name:"FlowRunCreate",setup(w){const t=k(),s=B("deploymentId"),n=G(),m=F("parameters",A,void 0),h=c(()=>!e.value||!m.value?{}:I.map("SchemaValuesResponse",{schema:e.value.parameterOpenApiSchema,values:m.value},"SchemaValues")),R=N(t.deployments.getDeployment,[s]),e=c(()=>R.response),_=async r=>{var l,o;try{const u=await t.deployments.createDeploymentFlowRun(s.value,r),p=((o=(l=r.state)==null?void 0:l.stateDetails)==null?void 0:o.scheduledTime)??void 0,g=!p,S=M(U,{flowRun:u,flowRunRoute:y.flowRun,router:n,immediate:g,startTime:p});f(S,"success"),n.push(y.deployment(s.value))}catch(u){f("Something went wrong trying to create a flow run","error"),console.error(u)}},v=()=>{n.back()},C=c(()=>e.value?`Create Flow Run for Deployment: ${e.value.name}`:"Create Flow Run for Deployment");return j(C),(r,l)=>{const o=V("p-layout-default");return a(e)?(J(),O(o,{key:0},{header:d(()=>[i(a(b),{deployment:a(e)},null,8,["deployment"])]),default:d(()=>[i(a(P),{deployment:a(e),parameters:a(h),onSubmit:_,onCancel:v},null,8,["deployment","parameters"])]),_:1})):T("",!0)}}});export{K as default};
