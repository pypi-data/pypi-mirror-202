import{d as C,T as x,aE as F,a as P,c as t,ad as m,u as e,e as u,w as n,h as p,g as V,x as w,o as k,j as A,b3 as D,b4 as N,b5 as j,b6 as z,b7 as E,aB as d,b8 as H,V as K}from"./index-1bb2d7f7.js";import{u as M}from"./usePageTitle-d4ce3b8c.js";const q=C({__name:"BlocksCatalogCreate",setup(R){const l=x(),s=w(),b=F("redirect"),i=P("blockTypeSlug"),y=t(()=>i.value?[i.value]:null),f=m(l.blockTypes.getBlockTypeBySlug,y),c=t(()=>f.response),h=t(()=>c.value?[c.value.id]:null),S=m(l.blockSchemas.getBlockSchemaForBlockType,h),r=t(()=>S.response);function _(a){l.blockDocuments.createBlockDocument(a).then(({id:o})=>B(o)).catch(o=>{d("Failed to create block","error"),console.error(o)})}function g(){s.back()}function B(a){if(d("Block created successfully","success"),b.value){const o=s.resolve(H(b.value));s.push(o);return}s.push(K.block(a))}const T=t(()=>c.value?`Create ${c.value.name} Block`:"Create Block");return M(T),(a,o)=>{const v=V("p-layout-default");return e(c)?(k(),u(v,{key:0,class:"blocks-catalog-create"},{header:n(()=>[A(e(D),{"block-type":e(c)},null,8,["block-type"])]),default:n(()=>[e(c)?(k(),u(e(N),{key:0,"block-type":e(c)},{default:n(()=>[e(r)?(k(),u(e(j),z({key:e(r).id,"block-schema":e(r)},E({submit:_,cancel:g})),null,16,["block-schema"])):p("",!0)]),_:1},8,["block-type"])):p("",!0)]),_:1})):p("",!0)}}});export{q as default};
