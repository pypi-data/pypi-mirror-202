Metadata-Version: 2.1
Name: yourtools
Version: 0.3.6
Summary: Python helper tools
Home-page: https://pypi.org/project/yourtools/
Author: zfang
Author-email: founder517518@163.com
License: UNKNOWN
Platform: UNKNOWN
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.6
Description-Content-Type: text/markdown
Requires-Dist: aniso8601 (==9.0.1)
Requires-Dist: bcrypt (==4.0.1)
Requires-Dist: bleach (==5.0.1)
Requires-Dist: certifi (==2022.9.24)
Requires-Dist: cffi (==1.15.1)
Requires-Dist: chardet (==3.0.4)
Requires-Dist: cheroot (==8.6.0)
Requires-Dist: click (==8.1.3)
Requires-Dist: commonmark (==0.9.1)
Requires-Dist: configtools (==0.3.3)
Requires-Dist: cryptography (==37.0.2)
Requires-Dist: DBUtils (==1.3)
Requires-Dist: distlib (==0.3.6)
Requires-Dist: docutils (==0.19)
Requires-Dist: filelock (==3.8.0)
Requires-Dist: Flask (==1.1.2)
Requires-Dist: Flask-Cors (==3.0.10)
Requires-Dist: Flask-RESTful (==0.3.8)
Requires-Dist: future (==0.18.2)
Requires-Dist: gunicorn (==20.0.4)
Requires-Dist: idna (==2.10)
Requires-Dist: importlib-metadata (==5.0.0)
Requires-Dist: itsdangerous (==1.1.0)
Requires-Dist: jaraco.classes (==3.2.3)
Requires-Dist: jaraco.functools (==3.0.1)
Requires-Dist: Jinja2 (==2.11.2)
Requires-Dist: keyring (==23.9.3)
Requires-Dist: logconfig (==0.4.0)
Requires-Dist: logutils (==0.3.5)
Requires-Dist: MarkupSafe (==1.1.1)
Requires-Dist: more-itertools (==8.6.0)
Requires-Dist: paramiko (==2.11.0)
Requires-Dist: pkginfo (==1.8.3)
Requires-Dist: platformdirs (==2.5.2)
Requires-Dist: psutil (==5.9.1)
Requires-Dist: pure-sasl (==0.6.2)
Requires-Dist: pycparser (==2.21)
Requires-Dist: Pygments (==2.13.0)
Requires-Dist: PyHive (==0.6.5)
Requires-Dist: PyMySQL (==0.10.1)
Requires-Dist: PyNaCl (==1.5.0)
Requires-Dist: python-dateutil (==2.8.2)
Requires-Dist: pytz (==2020.4)
Requires-Dist: PyYAML (==5.3.1)
Requires-Dist: readme-renderer (==37.3)
Requires-Dist: redis (==3.5.3)
Requires-Dist: requests (==2.25.0)
Requires-Dist: requests-toolbelt (==0.10.1)
Requires-Dist: rfc3986 (==2.0.0)
Requires-Dist: rich (==12.6.0)
Requires-Dist: sasl (==0.3.1)
Requires-Dist: simplejson (==3.17.2)
Requires-Dist: six (==1.15.0)
Requires-Dist: sshtunnel (==0.4.0)
Requires-Dist: thrift (==0.16.0)
Requires-Dist: thrift-sasl (==0.4.3)
Requires-Dist: twine (==4.0.1)
Requires-Dist: typing-extensions (==4.4.0)
Requires-Dist: urllib3 (==1.26.2)
Requires-Dist: virtualenv (==20.16.5)
Requires-Dist: web.py (==0.62)
Requires-Dist: webencodings (==0.5.1)
Requires-Dist: Werkzeug (==1.0.1)
Requires-Dist: zipp (==3.10.0)

# Python tools

## Installation
```shell
pip3 uninstall yourtools
pip3 install yourtools
```

## Table of Contents

- WeChat
  - send_msg 发送应用消息
  - upload_media 上传临时素材文件到企微，并返回media_id
- MySQL
  - query 执行普通查询SQL
  - execute 执行DML SQL
- Hive
  - query 执行普通查询SQL
  - exec_ddl_sql 执行DML SQL

## Example

### 1、MySQL

```python
from yourtools import MySQL

def test_mysql():
    dbconfg = {
        'host': '172.0.0.1',
        'port': 3306,
        'username': 'root',
        'password': '123456',
        'db': 'test',
        'charset': 'utf8'
    }
    server = SSHTunnelForwarder(
        ('跳板机服务器IP', 45535),
        ssh_username='root',
        ssh_password='123456',
        remote_bind_address=('远程数据库IP', 3366),
        local_bind_address=('127.0.0.1', 3366)
    )
    # 不使用跳板机
    mysql = MySQL(dbconfg)
    # 使用跳板机，需要传递一个SSHTunnelForwarder对象
    mysql = MySQL(dbconfg,ssh_tunnel=server)
    
    # query data
    result = mysql.query("select * from users")
    print(result)
    # dml sql 
    result = mysql.execute("insert into users(name,birthday,ts) values('灭霸2','2022-11-01 16:00:00','2022-11-01 16:00:00') ")
```

### 2、Hive
```python
from yourtools import Hive

hive_connection = {
    'host': '127.0.0.1',
    'port': 10000,
    'db': 'ods',
    'username': '',
    'auth': 'NOSASL'
}
hive = Hive(hive_connection)
hive_sql="""
select * from ods.ods_user
"""
rows = hive.query(hive_sql)
print(rows)

```

### 3、WeChat
```python
from yourtools import WeChat

# WeChat(corpid，Secret，AgentId)
qw = WeChat("asdg234234", "OINFSokasdIOKflsafdaOOKFD", 1000000)
data = {
    "touser": "198297694527839423",
    "toparty": "",
    "totag": "",
    "msgtype": "text",
    "agentid": 1000000,
    "text": {
        "content": "你的快递已到，请携带工卡前往邮件中心领取。\n出发前可查看<a href=\"http://work.weixin.qq.com\">邮件中心视频实况</a>，聪明避开排队。"
    },
    "safe": 0,
    "enable_id_trans": 0,
    "enable_duplicate_check": 0,
    "duplicate_check_interval": 1800
}
send_statu = qw.send_msg(data)
print(send_statu)
```


