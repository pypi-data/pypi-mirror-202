import unittest
from ..src.nextcloud_talk_bot.first_run_setup import get_credentials



    # Testen mit korrekten Anmeldedaten
    nextcloud_url = "https://nextcloud.de"
    username = "testuser"
    password = "testpassword"
    room = "testroom"
    nc_remote_folder = "testfolder"
    
    with patch('builtins.input', side_effect=[nextcloud_url, username, password, room, nc_remote_folder]):
        get_credentials()
        
    with open(".nextclouddata", "r") as f:
        data = f.read()
    assert f"NEXTCLOUD_URL::{nextcloud_url}\n" in data
    assert f"USERNAME::{username}\n" in data
    assert f"ROOM::{room}\n" in data
    assert f"NC_REMOTE_FOLDER::{nc_remote_folder}\n" in data

    with open(".password", "rb") as f:
        password_data = f.read()
    assert isinstance(password_data, bytes)

    with open(".decode", "rb") as f:
        decode_data = f.read()
    assert isinstance(decode_data, bytes)